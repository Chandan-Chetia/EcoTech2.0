<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Builder - Build Your Ecosystem</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #f0f8f0;
    color: #333;
    padding: 0;
}

.container {
    max-width: 1000px;
    margin: 0 auto;
    text-align: center;
    padding: 20px;
}

h1 {
    font-size: 32px;
    color: #228B22;
}

p {
    font-size: 16px;
    margin-bottom: 20px;
}

#gameCanvas {
    border: 2px solid #228B22;
    background-color: #e0f7e0;
    display: block;
    margin: 20px auto;
}

.toolbar {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin: 20px 0;
}

.tool-btn {
    background-color: #228B22;
    color: white;
    border: none;
    padding: 10px 15px;
    cursor: pointer;
    border-radius: 5px;
    font-size: 14px;
}

.tool-btn:hover {
    background-color: #1a6e1a;
}

.score {
    font-size: 18px;
    padding: 10px;
    background-color: #90EE90;
    border-radius: 5px;
}

.instructions {
    font-size: 14px;
    max-width: 600px;
    margin: 20px auto;
    background-color: #fff;
    padding: 15px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* Responsive Design */
@media (max-width: 768px) {
    h1 {
        font-size: 24px;
    }

    #gameCanvas {
        width: 100%;
        height: auto;
    }

    .toolbar {
        flex-direction: column;
        align-items: center;
    }

    .tool-btn {
        width: 80%;
        margin: 5px 0;
    }

    .instructions {
        font-size: 12px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <h1>Eco Builder</h1>
        <p>Build and maintain a balanced ecosystem! Earn sustainability points by keeping it thriving.</p>
        <canvas id="gameCanvas"></canvas>
        <div class="toolbar">
            <button class="tool-btn" data-tool="tree">Plant Tree</button>
            <button class="tool-btn" data-tool="water">Add Water</button>
            <button class="tool-btn" data-tool="rabbit">Add Rabbit</button>
            <button class="tool-btn" data-tool="fox">Add Fox</button>
            <div class="score">Sustainability Points: <span id="score">0</span></div>
        </div>
        <div class="instructions">
            <h3>How to Play</h3>
            <p>Click to place trees, water, rabbits, or foxes on the grid. Balance is keyâ€”too many animals or not enough resources cause problems! Watch for droughts or overpopulation.</p>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreElement = document.getElementById('score');

const GRID_SIZE = 20;
const CELL_SIZE = 30;
canvas.width = GRID_SIZE * CELL_SIZE;
canvas.height = GRID_SIZE * CELL_SIZE;

let grid = Array(GRID_SIZE).fill().map(() => Array(GRID_SIZE).fill(null));
let selectedTool = null;
let score = 0;
let droughtTimer = 0;
let populationCheck = 0;

const tools = {
    tree: { color: '#228B22', symbol: 'ðŸŒ³', resource: true },
    water: { color: '#00CED1', symbol: 'ðŸ’§', resource: true },
    rabbit: { color: '#FFA500', symbol: 'ðŸ°', population: 1 },
    fox: { color: '#FF4500', symbol: 'ðŸ¦Š', population: 2 }
};

canvas.addEventListener('click', (event) => {
    const rect = canvas.getBoundingClientRect();
    const x = Math.floor((event.clientX - rect.left) / CELL_SIZE);
    const y = Math.floor((event.clientY - rect.top) / CELL_SIZE);

    if (x >= 0 && x < GRID_SIZE && y >= 0 && y < GRID_SIZE && selectedTool) {
        if (grid[y][x] === null) {
            grid[y][x] = { ...tools[selectedTool], count: 0 };
            updateScore(5); // Reward for placing
            render();
        }
    }
});

document.querySelectorAll('.tool-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        selectedTool = btn.dataset.tool;
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
    });
});

function render() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let y = 0; y < GRID_SIZE; y++) {
        for (let x = 0; x < GRID_SIZE; x++) {
            if (grid[y][x]) {
                ctx.fillStyle = grid[y][x].color;
                ctx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE - 1, CELL_SIZE - 1);
                ctx.fillStyle = '#000';
                ctx.font = '16px Arial';
                ctx.fillText(grid[y][x].symbol, x * CELL_SIZE + 10, y * CELL_SIZE + 20);
                if (grid[y][x].population) {
                    ctx.fillText(grid[y][x].count, x * CELL_SIZE + 10, y * CELL_SIZE + 35);
                }
            }
        }
    }
}

function updateEcosystem() {
    let resources = 0;
    let rabbits = 0;
    let foxes = 0;

    // Count current state
    grid.forEach(row => {
        row.forEach(cell => {
            if (cell && cell.resource) resources++;
            if (cell && cell.population === 1) rabbits += cell.count;
            if (cell && cell.population === 2) foxes += cell.count;
        });
    });

    // Simulate ecosystem dynamics
    grid.forEach((row, y) => {
        row.forEach((cell, x) => {
            if (cell) {
                if (cell.resource) {
                    cell.count = Math.min(cell.count + 1, 5); // Resources grow slowly
                } else if (cell.population) {
                    if (cell.population === 1) { // Rabbits
                        if (resources > 0 && Math.random() < 0.3) cell.count++;
                        if (foxes > 0 && Math.random() < 0.2) cell.count--;
                    } else if (cell.population === 2) { // Foxes
                        if (rabbits > 0 && Math.random() < 0.4) cell.count++;
                        if (rabbits < 2) cell.count--;
                    }
                    cell.count = Math.max(0, cell.count); // Prevent negative counts
                }
            }
        });
    });

    // Drought or overpopulation check
    droughtTimer++;
    populationCheck++;
    if (droughtTimer > 200 && Math.random() < 0.1) {
        resources = Math.max(0, resources - 2);
        updateScore(-10);
        droughtTimer = 0;
    }
    if (populationCheck > 100 && (rabbits > 10 || foxes > 5)) {
        updateScore(-15);
        populationCheck = 0;
    }

    render();
}

function updateScore(points) {
    score += points;
    scoreElement.textContent = score;
    if (score < 0) alert("Ecosystem unbalanced! Try adding more resources or balancing animals.");
}

function gameLoop() {
    updateEcosystem();
    requestAnimationFrame(gameLoop);
}

gameLoop();
render();
    </script>
</body>
</html>